{"componentChunkName":"component---src-templates-blog-post-tsx","path":"/blog/better-pull-requests/","result":{"data":{"markdownRemark":{"id":"18cea561-7a3b-5b5b-86b0-334191940e8a","html":"<p>During my work to align our development efforts at <a href=\"https://leoinnovationlab.com/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Leo Innovation Lab</a> I stumbled upon <a href=\"http://blog.ploeh.dk/2015/01/15/10-tips-for-better-pull-requests/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">10 tips for better Pull Requests by Mark Seemann (2015)</a>. The blog post aligned well with our perception of a good pull request (PR) and was a great starting point for discussions.</p>\n<p>Below is my iteration of the original post. This is a condensed version with a focus on automation, tooling, context, and my personal learnings.</p>\n<p>The goal of these guidelines is to make the pull request review process easier and will likely:</p>\n<ul>\n<li>improve the feedback you get on your work</li>\n<li>reduce the risk that your pull request will be rejected or become stale</li>\n<li>elevate overall the quality of the code and product.</li>\n</ul>\n<h3>Do only one thing</h3>\n<blockquote>\n<p>The more concerns you address in a single Pull Request, the bigger the risk that at least one of them will block acceptance of your contribution. Do only one thing per Pull Request. It also helps you make each Pull Request smaller.</p>\n<p>– Mark Seemann</p>\n</blockquote>\n<p>If you often clutter PRs with multiple concerns then ask yourself why. Maybe your CI setup is slow? Maybe merging is cumbersome? In any case, start by fixing the underlying problems to enable you to <strong>do only one thing and make your PRs small</strong>.</p>\n<p>What is a small PR? A good rule of thumb is maximum a few days of work, preferably less. This also gives a great sense of progress. And usually you can break work up into smaller daily deliverables.</p>\n<h3>Short-lived feature branches</h3>\n<p>Avoid any long-lived feature branches. Getting your changes into the main branch as quickly as possible is often the most productive. It might require that you invest in setting up a system for supporting <a href=\"https://martinfowler.com/articles/feature-toggles.html\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">feature toggles</a>.</p>\n<h3>Set up proper tooling</h3>\n<p>A reviewer should not spend any time nitpicking over style, ensuring that tests pass or figuring out if the code coverage dropped. Instead you should <strong>invest in tooling and automate any verification steps</strong>. Block any merging until your CI server is happy and let your reviewers focus on more interesting topics than nitpicking over line width or spinning up the project on their local machine.</p>\n<h3>Add appropriate context in the PR</h3>\n<p>Adding context for the suggested change is important for the review process. This also serves for future reference when someone is trying to understand why a change was made.</p>\n<p>Include the following in your PR description:</p>\n<ul>\n<li>link to bug ticket or issue (if a link is missing this is usually an indicator that the work is not planned)</li>\n<li>a description of the suggested change</li>\n<li>relevant design considerations and alternative solutions considered</li>\n<li>checklist with TODOs if the pull request is a draft</li>\n<li>if the change can be represented visually, then add a screenshots/gif/video showing how the state before and after the change. Note that this also applies for a backend change (e.g. diff the GraphQL endpoint, show a database optimization using <code class=\"language-text\">EXPLAIN</code> or similar)</li>\n</ul>\n<p>I recommend using a <strong>pull request template</strong> to guide and ensuring that the relevant fields are filled out.</p>\n<h3>Document your code</h3>\n<p>Strive for self-documenting code (e.g. using clear and consistent naming, types and function signatures). But if you need to explain the code logic in the PR description, then it probably calls for better code comments.</p>\n<p>Code comments should document the why, not the how. Commit messages is also a great place for additional context.</p>\n<h3>Write well</h3>\n<p>Use correct spelling, grammar, and punctuation in code, code comments, <a href=\"https://chris.beams.io/posts/git-commit/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">commit messages</a>, and pull requests. If you don’t, your prose (and code) is harder to understand for the reviewers and future maintainers. Note that most code editors can be configured to help you with these concerns.</p>\n<h3>Avoid commit thrashing</h3>\n<p>When a PR is in review, please avoid rewriting the history on the branch (e.g. amending, squashing, or rebasing in general) and address any review comments in new commits.</p>\n<p>If you need to update the branch then avoid trashing the commit history with <code class=\"language-text\">Merge branch &#39;master&#39; into MY-BRANCH</code> commits. This can be done by using <strong>rebase instead of merging</strong> (e.g. <code class=\"language-text\">git pull --rebase origin master</code> if you are using git).</p>","timeToRead":3,"frontmatter":{"title":"Guidelines for better pull requests","date":"August 12, 2020","description":"7 tips and tricks for better pull requests to improve the feedback you get on your work and elevate the overall quality of the code and product.","devToLink":"https://dev.to/kenneth_skovhus/guidelines-for-better-pull-requests-3bho","featuredImage":null}},"site":{"siteMetadata":{"siteUrl":"https://skovhus.github.io"}}},"pageContext":{"slug":"/blog/better-pull-requests/","previous":{"fields":{"slug":"/blog/flow-to-typescript-migration/"},"frontmatter":{"title":"Migrating from Flow to TypeScript using flow-to-ts"}},"next":{"fields":{"slug":"/blog/bug-fixing/"},"frontmatter":{"title":"My mental model for fixing software bugs"}}}}}